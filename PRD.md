# 게임 기획 문서 (PRD): 변이하는 기보 (The Mutating Gambit)

**문서 버전:** 1.0
**작성일:** 2025년 11월 18일
**핵심 컨셉:** 체스의 규칙이 끊임없이 변이하는 던전을 탐험하며, 암기가 아닌 적응력으로 승부하는 싱글 플레이 로그라이트 전략 게임.

---

## 1. 개요 (Overview)

| 항목 | 내용 |
|------|------|
| **게임 제목** | 변이하는 기보 (The Mutating Gambit) |
| **개발 엔진** | Unity 2023.x (또는 최신 LTS) |
| **플랫폼** | PC (Steam) 우선, 모바일(iOS/Android) 추후 고려 |
| **장르** | 로그라이트 전략, 퍼즐, 체스 |
| **로그라인** | 당신이 알던 체스판은 잊어라. 매번 규칙이 변이하는 살아있는 던전 속에서, 적응하고, 진화하고, 승리하라. |

### 1.1. 타겟 오디언스

- 체스 규칙을 알지만 전통적인 메타에 지루함을 느끼는 플레이어
- Slay the Spire, Into the Breach, FTL 등 전략적 로그라이트 팬
- 예측 불가능한 퍼즐 해결을 즐기는 하드코어 전략 게이머

---

## 2. 게임 비전 및 핵심 가치 (Game Vision & Pillars)

### 2.1. 게임 비전

체스의 깊이 있는 전략과 로그라이트의 예측 불가능한 재미를 결합한다. '완벽한 수(The Best Move)'가 아닌 '창의적인 적응(Creative Adaptation)'을 보상함으로써, 플레이어에게 매번 새로운 전략적 도전을 제공한다.

### 2.2. 핵심 가치 (Pillars)

1. **끊임없는 적응 (Constant Adaptation)**
   고정된 전략은 없다. 플레이어는 매번 주어지는 '변이'와 '유물' 규칙에 맞춰 새로운 전술을 창조해야 한다.

2. **전략적 깊이 (Strategic Depth)**
   변이와 유물 시스템은 단순한 무작위성이 아니다. 이들의 조합(시너지)을 통해 기존 체스에서는 불가능했던 강력한 콤보와 전략적 선택지를 제공한다.

3. **탐험의 재미 (Rewarding Exploration)**
   던전 맵을 탐험하며 어떤 방(퍼즐/전투)을 선택하고 어떤 유물(보상)을 얻을지 결정하는 과정 자체가 전략적인 재미를 준다.

4. **높은 리플레이 가치 (High Replayability)**
   수백 가지의 변이와 유물 조합, 무작위로 생성되는 맵과 퍼즐을 통해 매판 완전히 다른 게임 경험을 보장한다.

---

## 3. 핵심 게임플레이 루프 (Core Gameplay Loop)

### 3.1. 매크로 루프 (Dungeon Loop)

1. **게임 시작**: 플레이어는 '시작 변이'를 확인한다.
   - 예: "나이트가 퀸처럼 이동하지만, 한 번만 사용 가능"

2. **던전 입장**: 무작위로 생성된 노드(방) 기반의 맵에 진입한다. (Slay the Spire 방식)

3. **방 선택**: 다음으로 이동할 방을 선택한다.
   - 일반 전투, 정예 전투, 보물 방, 휴식/수리 방

4. **방 클리어**: 해당 방의 퍼즐/전투를 완료한다.

5. **보상 획득**: 새로운 '유물'(전역 규칙 변경)을 3가지 선택지 중 하나 획득하거나, '파손된' 기물을 수리한다.

6. **반복**: 던전의 끝에 도달할 때까지 3~5를 반복한다.

7. **보스 전투**: 해당 층의 최종 보스(강력한 변이를 지닌 적 킹)와 전투한다.

8. **결과**: 승리 시 다음 층으로 이동, 패배(체크메이트) 시 게임 오버 및 메타 프로그레션 진행.

### 3.2. 마이크로 루프 (Room Loop - Combat/Puzzle)

1. **방 진입**: 적 기물 배치와 승리 조건을 확인한다.
   - 예: "5수 안에 체크메이트", "적 룩 제거", "내 킹을 특정 지점까지 이동"

2. **수 계산**: 현재 적용된 모든 '변이'와 '유물' 규칙을 기반으로 최적의 수를 계산한다.

3. **말 이동**: 내 말을 움직인다.

4. **AI 응수**: AI가 현재 규칙에 맞춰 응수한다.

5. **목표 달성**: 방의 목표를 달성할 때까지 2~4를 반복한다.

---

## 4. 주요 기능 상세 (Key Features)

### 4.1. 던전 탐험 (Dungeon Exploration)

- 전통적인 8x8 보드가 아닌, **Slay the Spire와 유사한 노드 기반 맵 시스템** 사용
- 각 '방'은 그 자체로 커스텀 보드(예: 5x5, 6x8, 비대칭 지형, 장애물 포함)를 가짐

#### 방 종류

- **일반 전투**: 간단한 퍼즐이나 소수의 적 기물과의 전투
- **정예 전투**: 변이된 적 기물이 등장하는 어려운 전투. 더 좋은 유물을 보상으로 제공
- **보스**: 층의 마지막. 고유한 패턴과 강력한 변이를 가진 보스(킹)
- **보물**: '유물'을 즉시 획득
- **휴식 (수리의 방)**: '파손된' 기물을 수리하거나 업그레이드(추가 변이 부여)
- **미스터리**: 무작위 이벤트 발생

### 4.2. 규칙 변이 시스템 (Mutation System)

**이 게임의 핵심.** 규칙은 두 가지 방식으로 변이한다.

#### A. 시작 변이 (Initial Mutation)

- 게임 시작 시, 플레이어의 주요 기물(룩, 나이트, 비숍 중 1~2개)에 무작위 변이가 적용
- 이 변이는 해당 게임 내내 지속

**예시:**
- **도약하는 룩**: 룩이 이동 경로 상의 아군 기물 1개를 뛰어넘을 수 있음
- **분열하는 나이트**: 나이트가 말을 잡을 때마다, 원래 있던 자리에 폰 1개를 생성함
- **유리 비숍**: 비숍이 대각선 무제한 이동이 아닌, 정확히 3칸만 이동 가능

#### B. 유물 시스템 (Artifact System)

- 방 클리어 시 획득하는 **영구적이고 전역적인 규칙**
- 플레이어와 AI 모두에게 적용되어 게임의 판도를 바꿈
- 획득한 유물은 중첩됨

**예시:**
- **중력 거울**: 모든 기물이 보드 하단(1~4행)으로 1칸씩 끌어당겨짐 (턴 종료 시 적용)
- **왕의 그림자**: 킹이 이동할 때마다, 원래 있던 자리에 1턴간 유지되는 '그림자'(장애물)가 생성됨
- **기병대의 돌격**: 나이트가 말을 잡을 때, 1칸 더 전진(관통)할 수 있음
- **연쇄 번개**: 기물이 잡힐 때마다, 주변 1칸에 있는 무작위 기물 1개도 함께 잡힘 (아군 포함)
- **승급 특권**: 폰이 보드 끝에 도달하지 않아도, 적 기물을 3개 잡으면 퀸으로 승급함

### 4.3. 기물 및 전투 (Pieces & Combat)

#### 기물 '파손' (HP 시스템)

- 전통 체스와 달리, 기물을 잃으면 **'파손' 상태**가 됨 (로그라이트의 '체력' 개념)
- '파손'된 기물은 해당 전투에서 제외되며, **'휴식/수리 방'**에서만 복구 가능
- 킹이 '파손'(체크메이트)되면 즉시 게임 오버

#### AI (적)

- 적 AI는 고정된 체스 엔진(Stockfish 등)을 사용하지 않음
- AI는 현재 적용된 모든 '변이'와 '유물' 규칙을 인지하고, 그 안에서 최적의 수를 찾는 **휴리스틱 또는 MCTS(몬테카를로 트리 탐색) 기반의 AI**여야 함 **(기술적 핵심)**

### 4.4. 메타 프로그레션 (Meta-Progression)

- 로그라이트(Roguelite) 요소를 위해, 게임 오버 시 **'기보 조각(가칭)'**을 획득
- '기보 조각'을 사용하여 로비에서 영구적인 업그레이드를 해금

#### 해금 요소

- 새로운 '시작 변이' 종류 해금 (시작 시 선택 폭 증가)
- 게임 중에 등장할 새로운 '유물' 팩 해금
- 초기 '수리 키트' 1개 가지고 시작 등 소소한 편의 기능

---

## 5. 기술 요구 사항 (Technical Requirements - Unity)

### 5.1. 유연한 체스 로직 엔진 (Flexible Chess Logic Engine)

**핵심:** 기물의 이동 규칙이 런타임에 동적으로 변경, 추가, 제거될 수 있어야 함

**Unity 구현:**
- `ScriptableObject`를 사용하여 개별 '이동 규칙'(예: L자 이동, 대각선 이동)을 모듈화
- 각 '기물(Piece)' 프리팹은 이 '이동 규칙' ScriptableObject의 리스트(List)를 참조
- '변이'나 '유물'은 이 리스트에 규칙을 추가하거나 제거, 수정하는 방식으로 작동 (예: Strategy Pattern 또는 Command Pattern 활용)

### 5.2. 커스텀 보드 생성기 (Custom Board Generator)

- 단순 8x8이 아닌, 5x5, 6x8 등 다양한 크기와 장애물(벽, 물 타일)을 포함하는 보드를 프리팹이나 데이터 파일(JSON/ScriptableObject)로부터 동적으로 생성하는 시스템

### 5.3. 던전 맵 생성기 (Dungeon Map Generator)

- Slay the Spire 스타일의 노드 기반 맵을 절차적으로 생성하는 알고리즘 (Unity UI 또는 2D 스프라이트 활용)

### 5.4. AI 시스템 (Adaptive AI System)

**최대 난관:**
- AI는 ScriptableObject로 정의된 현재의 모든 이동 규칙과 '유물'의 전역 규칙을 실시간으로 평가할 수 있어야 함
- 기존 체스 엔진 사용 불가
- 현재 게임 상태(State)와 적용된 규칙(Rules)을 기반으로 가능한 모든 수를 평가하는 **커텀 AI 로직 개발이 필수**
- 경량화된 MCTS 또는 Alpha-Beta Pruning 변형 고려

- 경량화된 MCTS 또는 Alpha-Beta Pruning 변형 고려

### 5.5. 저장 및 불러오기 시스템 (Save & Load System)

- **중단 저장 (Suspend)**: 던전 진행 중 언제든지 게임을 종료하고, 나중에 정확히 같은 지점에서 재개할 수 있어야 함
- **상태 직렬화**: 보드 상태, 플레이어 덱(기물), 유물, 던전 진행도를 JSON 또는 바이너리 형태로 직렬화

### 5.6. UI/UX 시스템

**가독성 중요:**
- 플레이어가 현재 자신과 적 기물에 적용된 '변이' 및 전역 '유물' 목록을 항상 명확하고 쉽게 확인할 수 있는 UI가 필수적
- 마우스 오버 시 툴팁, 상시 노출되는 아이콘 등

### 4.5. 튜토리얼 및 온보딩 (Tutorial & Onboarding)

- **스크립트 튜토리얼**: 게임의 기본 규칙(변이, 유물, 파손)을 학습할 수 있는 짧은 시나리오 모드
- **상황별 팁**: 게임 플레이 중 새로운 상황(첫 변이 획득, 첫 파손 등) 발생 시 팝업 팁 제공

### 4.6. 도감 및 기록 (Codex & History)

- **도감 (Murimji)**: 발견한 모든 변이, 유물, 적 기물의 정보를 확인하는 메뉴
- **런 기록 (Run History)**: 지난 게임의 결과(승/패, 획득 유물, 도달 층수)를 열람하는 기능

### 4.7. 시드 시스템 (Seed System)

- **시드 공유**: 특정 던전 생성 시드를 공유하여 다른 플레이어와 동일한 조건에서 경쟁 가능
- **일일 도전**: 매일 변경되는 고정 시드와 특수 규칙으로 전 세계 플레이어와 점수 경쟁

---

## 6. 아트 및 오디오 (Art & Audio Direction)

### 6.1. 아트 스타일

- **어둡고 신비로운 판타지 스타일** (예: Darkest Dungeon의 분위기 + 체스)
- 기물은 단순한 아이콘이 아닌, 고유한 3D 모델이나 고품질 2D 스프라이트 사용

### 6.2. VFX (시각 효과)

- '변이'가 적용된 기물은 고유한 시각적 이펙트(예: 불타는 룩, 그림자 나이트)를 가짐
- '유물' 효과가 발동될 때(예: '중력 거울' 발동) 보드 전체에 시각적 피드백을 제공

### 6.3. 사운드

- 웅장하고 긴장감 있는 오케스트라 BGM
- 말이 움직일 때의 묵직하고 만족스러운 효과음
- 유물 획득 시의 신비로운 사운드 디자인

---

## 7. MVP (Minimum Viable Product) 범위

**가장 핵심적인 재미(변이 + 적응)를 검증하기 위한 최소 범위**

### MVP 구성 요소

- **1개의 던전** (총 10~15개의 방으로 구성)
- **1개의 최종 보스** (고유 변이 1종 보유)
- **3종류의 방** (일반 전투, 정예 전투, 보스)
- 핵심 기물(룩, 나이트, 비숍)에 대한 **'시작 변이' 10종**
- 획득 가능한 **'유물' 20종** (게임의 판도를 바꿀 수 있는 핵심적인 것들 위주)
- **변이 규칙을 인지하는 기본 AI** (MCTS가 어렵다면, 휴리스틱 기반의 간단한 AI라도 구현)
- 필수적인 **아트 및 사운드 리소스** (Placeholder 허용)
- **메타 프로그레션 제외** (초기 빌드에서는 로그라이크(Roguelike)로 접근)
- **기본적인 튜토리얼** (텍스트 기반이라도 필수)
- **중단 저장 기능** (필수 편의 기능)

---

## 부록

### 개발 우선순위

1. **Phase 1: 핵심 엔진 구축**
   - 유연한 체스 로직 엔진
   - 기본 보드 시스템
   - 기본 UI/UX

2. **Phase 2: 변이 시스템**
   - 시작 변이 구현
   - 유물 시스템 구현
   - 규칙 동적 변경 테스트

3. **Phase 3: 던전 시스템**
   - 맵 생성기
   - 방 종류별 구현
   - 보상 시스템

4. **Phase 4: AI 개발**
   - 휴리스틱 기반 AI
   - 규칙 인지 시스템
   - 난이도 조정

5. **Phase 5: 콘텐츠 & 밸런싱**
   - 변이/유물 추가
   - 밸런싱
   - 아트/사운드 통합

### 기술적 리스크

1. **AI 개발의 복잡성** - 동적 규칙을 인지하는 AI 구현이 가장 큰 기술적 도전
2. **성능 최적화** - 복잡한 규칙 조합 시 성능 저하 가능성
3. **밸런싱** - 수백 가지 변이/유물 조합의 밸런스 조정

### 성공 지표

- 플레이어의 평균 플레이 시간 (세션당 30분 이상)
- 반복 플레이율 (주간 3회 이상)
- 각 변이/유물의 사용률 분포 (다양성 확보)
- Steam 리뷰 긍정 평가 비율 (80% 이상)
